<div class="dashboard-wrapper">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <h2>Super Admin</h2>
    <nav>
      <button (click)="navigateToProduits()">ğŸ“¦ Produits</button>
      <button (click)="navigateToUsers()">ğŸ‘¥ Utilisateurs</button>
      <button (click)="navigateToAddProduct()">â• Ajouter un Produit</button>
      <button class="logout-btn" (click)="logout()">ğŸšª DÃ©connexion</button>
    </nav>
  </aside>

  <!-- CONTENU PRINCIPAL -->
  <main class="main-content">
    <h1>Bienvenue sur votre tableau de bord</h1>

    <!-- Statistiques Utilisateurs -->
    <section class="stats-section">
      <h3>ğŸ“Š RÃ©partition des rÃ´les</h3>
      <ngx-charts-pie-chart
        [view]="[500, 500]"
        [scheme]="colorScheme"
        [results]="userRoleCounts"
        [legend]="true"
        [labels]="true"
        [doughnut]="true">
      </ngx-charts-pie-chart>
    </section>

    <!-- Statistiques Produits -->
    <section class="stats-section">
      <h3>ğŸ“¦ QuantitÃ© par produit</h3>
      <ngx-charts-bar-vertical
        [view]="[600, 400]"
        [scheme]="colorScheme"
        [results]="productQuantities"
        [xAxis]="true"
        [yAxis]="true"
        [legend]="false"
        [showXAxisLabel]="true"
        [showYAxisLabel]="true"
        [xAxisLabel]="'Produit'"
        [yAxisLabel]="'QuantitÃ©'"
        [animations]="true">
      </ngx-charts-bar-vertical>
    </section>

    <!-- ğŸ“‘ Gestion des commandes -->
    <section class="stats-section">
      <h3>ğŸ“‘ Liste des commandes</h3>
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Utilisateur</th>
            <th>Date</th>
            <th>Statut</th>
            <th>Total</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let cmd of commandes">
            <td>{{ cmd.id }}</td>
            <td>{{ cmd.username }}</td>
            <td>{{ cmd.dateCreation | date:'short' }}</td>
            <td>
              <span 
                class="status-badge" 
                [ngClass]="{
                  'pending': cmd.statut === 'EnAttente',
                  'processing': cmd.statut === 'EnCours',
                  'delivered': cmd.statut === 'Livree',
                  'cancelled': cmd.statut === 'Annulee'
                }">
                {{ cmd.statut }}
              </span>
            </td>
            <td>{{ cmd.total | currency:'TND' }}</td>
            <td>
              <button (click)="changerStatut(cmd.id, 'EnCours')">ğŸšš En cours</button>
              <button (click)="changerStatut(cmd.id, 'Livree')">âœ… LivrÃ©e</button>
              <button (click)="annulerCommande(cmd.id)" class="cancel-btn">âŒ Annuler</button>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>
</div>
