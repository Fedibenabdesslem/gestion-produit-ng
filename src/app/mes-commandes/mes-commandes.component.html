<div class="commandes-container">
  <h2>ğŸ“¦ Mes Commandes</h2>

  <div *ngIf="commandes.length > 0; else pasDeCommande">
    <div *ngFor="let cmd of commandes" class="commande-card">
      <!-- Header -->
      <div class="commande-header">
        <div>
          <h3>Commande #{{ cmd.id }}</h3>
          <p>{{ cmd.dateCreation | date:'short' }}</p>
        </div>
        <div class="commande-total">
          <strong>Total :</strong> {{ cmd.total | number:'1.2-2' }} DT
        </div>
      </div>

      <!-- Timeline animÃ©e -->
      <div class="timeline">
        <div class="step" [class.active]="['EnCours','ValidÃ©e','ExpÃ©diÃ©e','LivrÃ©e'].includes(cmd.statut)">
          <div class="circle">ğŸ“</div>
          <div class="label">En cours</div>
        </div>
        <div class="step" [class.active]="['ValidÃ©e','ExpÃ©diÃ©e','LivrÃ©e'].includes(cmd.statut)">
          <div class="circle">âœ…</div>
          <div class="label">ValidÃ©e</div>
        </div>
        <div class="step" [class.active]="['ExpÃ©diÃ©e','LivrÃ©e'].includes(cmd.statut)">
          <div class="circle">ğŸ“¦</div>
          <div class="label">ExpÃ©diÃ©e</div>
        </div>
        <div class="step" [class.active]="cmd.statut === 'LivrÃ©e'">
          <div class="circle">ğŸšš</div>
          <div class="label">LivrÃ©e</div>
        </div>
        <div class="step cancelled" *ngIf="cmd.statut === 'AnnulÃ©e'">
          <div class="circle">âŒ</div>
          <div class="label">AnnulÃ©e</div>
        </div>
      </div>

      <!-- Produits -->
      <div class="produits-commande">
        <div *ngFor="let item of cmd.items" class="produit-item">
          <div class="produit-nom">{{ item.nomProduit }}</div>
          <div class="produit-prix">{{ item.prixUnitaire }} DT</div>
        </div>
      </div>

      <!-- Actions -->
      <div class="commande-actions">
        <button *ngIf="cmd.statut === 'EnCours'" class="btn-annuler"
                (click)="annulerCommande(cmd.id)">
          âŒ Annuler
        </button>
      </div>
    </div>
  </div>

  <ng-template #pasDeCommande>
    <p class="no-commandes">Vous n'avez encore passÃ© aucune commande.</p>
  </ng-template>
</div>
